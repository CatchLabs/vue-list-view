"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function ListView(){var itemComponent=arguments.length<=0||void 0===arguments[0]?{template:""}:arguments[0];return itemComponent.props={item:{type:Object}},{template:'\n            <div class="list-view" @scroll="scrollHandler" style="overflow-x: hidden; overflow-y: auto">\n                <slot name="list-start"></slot>\n                <div v-for="item in items" class="list-view-item" :style="{height: placeholders[$index] + \'px\'}">\n                    <list-view-item v-if="placeholders[$index] == null" :item="item"></list-view-item>\n                </div>\n                <slot name="list-end"></slot>\n            </div>\n        ',props:{items:{type:Array,required:!0},preloadScreens:{type:Number,"default":3}},components:{listViewItem:itemComponent},data:function(){return{placeholders:[]}},methods:{scrollHandler:(0,_throttle2["default"])(function(){var el=this.$el;el&&window.innerHeight+el.scrollTop>=el.scrollHeight&&this.$dispatch("list-view:scrolled-to-end"),el&&this.checkVisibility()},500),checkVisibility:function(){var _this=this,preloadScreens=this.preloadScreens;setTimeout(function(){var els=_this.$el.querySelectorAll(".list-view-item"),placeholders=_this.placeholders;_this.items.forEach(function(item,index){var rect=els[index].getBoundingClientRect();rect.bottom<-preloadScreens*window.innerHeight||rect.top>window.innerHeight*preloadScreens?placeholders[index]||placeholders.$set(index,rect.height):placeholders[index]&&placeholders.$set(index,null)})},1)}},watch:{items:function(_items){this.placeholders=_items.map(function(i){return null}),this.checkVisibility()}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=ListView;var _throttle=require("lodash/throttle"),_throttle2=_interopRequireDefault(_throttle);